<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vegetable and Fruits Market</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="./shop.css">


</head>

<body>
    <header>
        <div class="logo">
            <img src="../images/logo.png" alt="">
        </div>
        <div class="h-details">
            <h1>Fresh Vegetables and Fruits</h1>
            <p>Browse through a curated selection of fresh produce available in the market.</p>
        </div>
        <div class="cart-container">
            <a href="booking.html" class="cart-link">
                <i class="fa-solid fa-cart-shopping"></i>
            </a>
        </div>
    </header>

    <!-- <div class="categories">
        <button>All</button>
        <button>Vegetables</button>
        <button>Fruits</button>
        <button>Organic</button>
    </div> -->

    <section class="product-list">
        <div class="product-item">
            <img src="../images/toma.jpeg" alt="Product Image">
            <div class="card-text">
                <h3>Tomato</h3>
                <p>Price: ₹20/kg</p>
                <p>Availability: In Stock</p>
                <button class="add-to-cart">Add to Cart</button>
                <button class="remove">Remove from Cart</button>
            </div>
        </div>
        <div class="product-item">
            <img src="../images/banana.jpeg" alt="Product Image">
            <div class="card-text">
                <h3>Banana</h3>
                <p>Price: ₹40/kg</p>
                <p>Availability: Limited</p>
                <button class="add-to-cart">Add to Cart</button>
                <button class="remove">Remove from Cart</button>
            </div>
        </div>
        <div class="product-item">

            <img src="../images/carrot.jpeg" alt="Product Image">
            <div class="card-text">
                <h3>Carrot</h3>
                <p>Price: ₹30/kg</p>
                <p>Availability: In Stock</p>
                <button class="add-to-cart">Add to Cart</button>
                <button class="remove">Remove from Cart</button>
            </div>
        </div>
        <div class="product-item a">

            <img src="../images/apple.jpeg" alt="Product Image">
            <div class="card-text">
                <h3>Apple</h3>
                <p>Price: ₹100/kg</p>
                <p>Availability: Out of Stock</p>
                <button class="add-to-cart">Add to Cart</button>
                <button class="remove">Remove from Cart</button>
            </div>
        </div>
    </section>
    <script>
        let price = 0;
        window.onload = () => {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            document.querySelectorAll('.product-item').forEach(product => {
                const productName = product.querySelector('h3').innerText;
                const addButton = product.querySelector('.add-to-cart');
                const removeButton = product.querySelector('.remove');
                const isInCart = cart.some(item => item.name === productName);
                if (isInCart) {
                    addButton.style.display = "none";
                    removeButton.style.display = "inline";
                } else {
                    addButton.style.display = "inline";
                    removeButton.style.display = "none";
                }
            });
        }
        function b(event) {
            const product = event.target.closest('.product-item');
            const productName = product.querySelector('h3').innerText;
            const productPrice = product.querySelector('p').innerText.split('₹')[1].split('/')[0].trim();

            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.push({ name: productName, price: productPrice, quantity: 1 });
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${productName} added to cart`);
            const removeButton = event.target.nextElementSibling;
            event.target.style.display = "none";
            removeButton.style.display = "inline";


        }
        const remFunc = (event) => {
            var cart = JSON.parse(localStorage.getItem('cart'));
            const button = event.target
            const product = event.target.closest('.product-item');
            const productName = product.querySelector('h3').innerText;
            cart = cart.filter(item => item.name !== productName);
            localStorage.setItem('cart', JSON.stringify(cart));
            alert("removed from Cart");
            button.style.display = "none"
            event.target.previousElementSibling.style.display = 'inline';
        }
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', b);
        });
        document.querySelectorAll('.remove').forEach(button => {
            button.addEventListener('click', remFunc)
        })

    </script>
</body>

</html>